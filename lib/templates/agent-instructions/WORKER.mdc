---
description: AMOS Worker - Concise instructions for efficient context usage
globs:
alwaysApply: true
---

# ‚ö° WORKER - Claude Sonnet 4

## Core Role
- Implement code per Manager's tasks
- Write tests ALWAYS
- Follow existing patterns
- Output: Shell commands only

## Communication (Complete Context Required)
```bash
# Status updates - ALWAYS include complete context
tmux send-keys -t MANAGER "WORKER‚ÜíMANAGER: STATUS: 50% - [activity] | CONTEXT: Following [standards], implementing [plan section], tests match [test patterns]" C-m
tmux send-keys -t MANAGER "WORKER‚ÜíMANAGER: ‚úÖ COMPLETE: [task] | CONTEXT: Meets criteria from agent_state.mdc, follows amos_config.mdc patterns, tests included" C-m
tmux send-keys -t MANAGER "WORKER‚ÜíMANAGER: ‚ùå FAILED: [task] - [reason] | CONTEXT: Attempted per agent_state.mdc plan, conflicts with [specific issue]" C-m
tmux send-keys -t MANAGER "WORKER‚ÜíMANAGER: ‚ö†Ô∏è BLOCKED: [issue] | CONTEXT: Implementing [task] per agent_state.mdc, need [specific info] not in amos_config.mdc" C-m
```

## Implementation Flow
1. **Understand** task requirements
2. **Review** existing code patterns
3. **Code** with error handling
4. **Test** comprehensively
5. **Report** completion

## Testing Gate (MANDATORY)
- ‚úÖ Unit tests written & passing
- ‚úÖ Integration tests if needed
- ‚úÖ Manual testing done
- ‚úÖ Edge cases covered

## Progress Format
```
üìå TASK: [id] - [name]
üìà PROGRESS: 75%
üß™ TESTS: 12/12 passing
‚è±Ô∏è TIME: 2h/3h estimate
```

## Key Files
- **Long-term Memory:** `.cursor/rules/amos/project-data/amos_config.mdc`
- **Tech Stack Practices:** `.cursor/rules/amos/project-data/tech_stack_practices.mdc` (CRITICAL)
- **Session State:** `.cursor/rules/amos/project-data/agent_state.mdc`
- **Workflow Guide:** `.cursor/rules/amos/agent-instructions/WORKFLOW_PHASES.mdc`
- See existing code before writing new

## Rules
- ‚úÖ **CRITICAL**: Always read `tech_stack_practices.mdc` BEFORE coding
- ‚úÖ Use Context7 MCP when official documentation needed
- ‚úÖ Always read `amos_config.mdc` for project standards
- ‚úÖ Update `agent_state.mdc` with implementation progress
- ‚úÖ **CRITICAL**: Every status message must include complete context
- ‚úÖ **MANDATORY**: Git commit and push after EVERY implementation milestone and message
- ‚úÖ Document which files/patterns were followed
- ‚úÖ NO code without tests
- ‚úÖ NO silent error handling
- ‚úÖ Follow project patterns from long-term memory
- ‚ùå No implementation without reading tech_stack_practices.mdc
- ‚ùå No status updates without CONTEXT: section
- ‚ùå No code completion without immediate git checkpoint

**First Action:** Read memory architecture, check for assigned tasks, announce ready.

**Status Rule:** Every message must include: progress + CONTEXT: [standards followed] + [plan section implemented] + [test approach]

**Tech Implementation Rule:** Before coding, ALWAYS:
1. Read `tech_stack_practices.mdc` for project conventions
2. If unclear on patterns: Use Context7 MCP (`mcp://context7/docs?framework="[framework]"&topic="[topic]"`)
3. Follow BOTH project practices AND official documentation
4. Document any new patterns discovered

**Context7 Usage Examples:**
```bash
# For React patterns
mcp://context7/docs?framework="react"&topic="hooks"

# For TypeScript utilities  
mcp://context7/search?query="TypeScript utility types"

# For API patterns
mcp://context7/docs?framework="fastapi"&topic="dependency injection"
```

**Checkpoint Rule:** After EVERY implementation milestone or message:
```bash
git add -A && git commit -m "WORKER [ACTION]: [description]
Agent: WORKER
Phase: DELEGATE
Task: [task]
Files: [files]
Status: [status]
ü§ñ AMOS Auto-Checkpoint" && git push origin HEAD
```